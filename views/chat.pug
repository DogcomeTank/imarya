extends layout

block style
  style.
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font: 13px Helvetica, Arial;
    }

    form {
      background: #000;
      padding: 3px;
      position: fixed;
      bottom: 0;
      width: 100%;
    }

    form input {
      border: 1;
      padding: 10px;
      width: 90%;
      margin-right: .5%;
    }

    form button {
      width: 9%;
      background: rgb(130, 224, 255);
      border: none;
      padding: 10px;
    }

    #messages {
      list-style-type: none;
      margin: 0;
      padding: 0;
    }

    #messages li {
      padding: 5px 10px;
    }

    #messages li:nth-child(odd) {
      background: #eee;
    }

block content
  ul#messages
  form(action="")
    input#userName(autocomplete="off" required)
    input#m(autocomplete="off" required)
    button Send
    
block script
    script(src='scripts/socket.io-client/dist/socket.io.js')
    script.
    
    //    const socket = io()
        const myColor = getRandomColor();
        console.log(mHistory);
        $('form').submit(function(e){
            e.preventDefault();
            const message = {
                'msg': $('#m').val(),
                'userName': $('#userName').val(),
                'color': myColor
            };
            socket.emit('chat message', message);
            $('#m').val('');
        });
        
        socket.on('chat broadcast', (newMessage)=>{
            //$("#messages").append(`<li>${newMessage.msg}</li>`);
            $("#messages").append(`<li style='color:${newMessage.color}'>${newMessage.userName}:  ${newMessage.msg}</li>`);
        });
        
        function getRandomColor() {
          var letters = '0123456789ABCDEF';
          var color = '#';
          for (var i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
          }
          return color;
        }


















